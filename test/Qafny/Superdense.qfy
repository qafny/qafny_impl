include BellPair.qfy //should we allow inclusion? This is not an important feature. Maybe a simple script

method Superdense(q : Q[2], x : Bool, y: Bool) returns (u:Bool, v:Bool, probu: real, probv:real)
  requires { q[0, 2) : nor ↦ |0⟩ }
  ensures u == x
  ensures v == y
  ensures probu == 1
  ensures probv == 1 //prob is real number, might need to change
{
  Bellpair(q[0,2)); //p references to q[0,2)
  
  if y then { q[0] *= λ (x => |x + 1⟩); }
  if x then { q[1] *= λ (x => omega(1,2)); } 
  
  if q[0] { q[1]  *= λ (x => |x + 1⟩); } //cx gate, 
  q[0] *= H;

  u,probu := measure(q[0]); //u is x in 100%
  v,probv := measure(q[1]); //v is y in 100%
   
}
